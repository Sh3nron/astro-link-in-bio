---
import { Picture, Image } from 'astro:assets';

interface Props {
  name: string;
  bio: string;
  image: ImageMetadata;
}

const { name, bio, image } = Astro.props;
const isSvg = image.format === 'svg';
---

<div class="flex flex-col items-center text-center">
  <div class="glass-profile relative rounded-full">
    <div class="relative h-24 w-24 overflow-hidden rounded-full">
      {isSvg ? (
        <Image
          src={image}
          alt={`${name} profile photo`}
          loading="eager"
          fetchpriority="high"
          width={96}
          height={96}
        />
      ) : (
        <Picture
          /* Optimized for LCP: generates 1x/2x versions and prevents layout shift */
          src={image}
          formats={['avif', 'webp']}
          alt={`${name} profile photo`}
          loading="eager"
          fetchpriority="high"
          width={96}
          height={96}
          widths={[96, 192]}
          sizes="96px"
        />
      )}
    </div>
    <div class="profile-glow absolute inset-0 rounded-full pointer-events-none"></div>
  </div>
  <h1 class="mt-5 text-xl font-semibold tracking-tight text-gray-800">{name}</h1>
  <p class="mt-2 text-sm text-gray-500">{bio}</p>
</div>
